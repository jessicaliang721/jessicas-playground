<div class="row related-posts">
	<div class="col">
		<h3 class="text-center">Related Posts</h3>
		{% assign maxRelated = 3 %}
		{% assign minCommonTags =  1 %}
		{% assign maxRelatedCounter = 0 %}
		<div class="row">
			{% for post in site.posts %}
				{% assign sameTagCount = 0 %}
				{% for tag in post.tags %}
					{% if post.url != page.url %}
						{% if page.tags contains tag %}
							{% assign sameTagCount = sameTagCount | plus: 1 %}
						{% endif %}
					{% endif %}
				{% endfor %}

				{% if sameTagCount >= minCommonTags %}
					<div class="col-md-4">
						{% include card.html %}
					</div>
					{% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
					{% if maxRelatedCounter >= maxRelated %}
						{% break %}
					{% endif %}
				{% endif %}
			{% endfor %}
		</div>
	</div>
</div>